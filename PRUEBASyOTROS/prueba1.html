<!DOCTYPE html>
<html>
  <head>
    <title>Mapa con lugares cercanos</title>
    <script src="https://maps.googleapis.com/maps/api/js?key=TU_CLAVE_API&libraries=places"></script>
  </head>
  <body>
    <div id="map" style="height: 500px;"></div>
    <script>
      function initMap() {
        const map = new google.maps.Map(document.getElementById('map'), {
          center: { lat: -12.046374, lng: -77.042793 }, // Coordenadas de Lima, Perú
          zoom: 10,
        });

        // Obtener las coordenadas de la ubicación del visitante
        navigator.geolocation.getCurrentPosition(function(position) {
          var lat = position.coords.latitude;
          var lng = position.coords.longitude;

          // Crear un objeto LatLng para la ubicación del visitante
          var visitorLocation = new google.maps.LatLng(lat, lng);

          // Crear un objeto para la solicitud de búsqueda
          var request = {
            location: visitorLocation,
            radius: '2000',
            type: ['restaurant'] // Puedes cambiar el tipo de lugar que estás buscando
          };

          // Realizar la solicitud de búsqueda
          var service = new google.maps.places.PlacesService(map);
          service.nearbySearch(request, function(results, status) {
            if (status === google.maps.places.PlacesServiceStatus.OK) {
              // Mostrar los lugares encontrados en el mapa
              for (var i = 0; i < results.length; i++) {
                createMarker(results[i]);
              }
            }
          });
        });

        const ballIcon = {
          url: 'https://i.ibb.co/z7zBm4C/4-removebg-preview.png',
          scaledSize: new google.maps.Size(40, 40),
        };

        function createMarker(place) {
          const marker = new google.maps.Marker({
            map,
            position: place.geometry.location,
            title: place.name,
            icon: ballIcon,
            label: {
              text: place.name,
              color: 'red',
            },
          });

          marker.addListener('click', () => {
            window.location.href = place.url;
          });
        }
      }
      window.onload = initMap;
    </script>
  </body>
</html>
